# Models Directory

This directory contains the data models used throughout the application. These models define the structure of data, often representing entities that are stored in a database (like Firestore) or exchanged with APIs.

## `user_profile.dart`

This file defines the `UserProfile` data model, which represents a user's profile information within the application. It leverages the `freezed` and `json_serializable` packages for immutability, value equality, and automatic JSON serialization/deserialization.

### `UserProfile` Class

The `UserProfile` class is a `freezed` union type, providing a robust and efficient way to handle user data.

**Fields:**

*   **`uid`** (`String`): The unique identifier for the user. This field is excluded from JSON serialization/deserialization as it's typically managed by the authentication system (e.g., Firebase Auth).
*   **`firstName`** (`String`): The user's first name.
*   **`lastName`** (`String`): The user's last name.
*   **`email`** (`String`): The user's email address.
*   **`emailLowercase`** (`String`): The lowercase version of the user's email, used for case-insensitive lookups.
*   **`permissionLevel`** (`PermissionLevel`): The user's permission level, defaulting to `PermissionLevel.PRODUCTION`.
*   **`accountCreationTime`** (`int`): The timestamp (in milliseconds since epoch) when the account was created, defaulting to `0`.
*   **`dateLastPasswordChange`** (`DateTime`): The date and time when the user last changed their password. This field uses a custom `TimestampConverter` for proper handling of Firestore `Timestamp` objects.
*   **`accountCreationStep`** (`AccountCreationStep`): The current step in the user's account creation process, defaulting to `AccountCreationStep.ACC_STEP_ONBOARDING_PROFILE_CONTACT_INFO`.

**Constructors:**

*   **`const factory UserProfile({...}) = _UserProfile;`**: The primary factory constructor for creating `UserProfile` instances.
*   **`factory UserProfile.fromJson(Map<String, dynamic> json) => _$UserProfileFromJson(json);`**: A factory constructor for deserializing a `UserProfile` instance from a JSON map. This is automatically generated by `json_serializable`.
*   **`const UserProfile._();`**: A private constructor used by `freezed` to allow for custom methods and getters within the `UserProfile` class.

**Getters:**

*   **`bool get isMissingKeyData`**: Returns `true` if essential user data (uid, firstName, lastName, email) is missing.
*   **`String get wholeName`**: Returns the user's full name (first name + last name).

### `TimestampConverter` Class

This class implements `JsonConverter` to handle the serialization and deserialization of `DateTime` objects to and from Firestore `Timestamp` objects. This is crucial for correctly storing and retrieving date/time information in Firestore.

### Enums

*   **`AccountCreationStep`**: Defines the various steps a user goes through during the account creation and onboarding process.
    *   `ACC_STEP_ONBOARDING_PROFILE_CONTACT_INFO`: Initial step where contact information is gathered.
    *   `ACC_STEP_ONBOARDING_COMPLETE`: Indicates the onboarding process is complete.
*   **`PermissionLevel`**: Defines different access levels or roles for a user within the application.
    *   `PRODUCTION`: Standard user access.
    *   `BETA`: Access for beta testers.
    *   `DEVELOPER`: Access for developers, potentially with elevated permissions.

## `user_profile.freezed.dart`

This file is automatically generated by the `freezed` package. It contains the boilerplate code for:

*   Immutable classes.
*   Value equality (`==` and `hashCode`).
*   `copyWith` methods for easily creating modified copies of instances.
*   JSON serialization/deserialization integration with `json_serializable`.

**Do not modify this file manually.**

## `user_profile.g.dart`

This file is automatically generated by the `json_serializable` package. It contains the code for:

*   `_$UserProfileFromJson` function: Handles the deserialization of a JSON map into a `UserProfile` instance.
*   `_$$UserProfileImplToJson` function: Handles the serialization of a `UserProfile` instance into a JSON map.
*   `_$[EnumName]EnumMap` constants: Maps enum values to their string representations for JSON serialization.

**Do not modify this file manually.**